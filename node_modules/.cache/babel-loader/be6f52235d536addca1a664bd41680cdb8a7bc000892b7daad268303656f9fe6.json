{"ast":null,"code":"import{useEffect,useState}from\"react\";import{useExerciseData}from\"../../Contexts/ExerciseContext\";import TextToSpeech from\"../TextToSpeech/TextToSpeech\";import NextButtonRight from\"../NextButtonRight/NextButtonRight\";import ProgressBar from\"../ProgressBar/ProgressBar\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function QuestionCompleteSentence(_ref){let{question}=_ref;const{handleNextQuestion,handleAddMistake}=useExerciseData();const[answers,setAnswers]=useState(Array.from(question.answers,()=>false));const[correct,setCorrect]=useState(false);const splitSentence=question.prompts[0].split(\"%\");const correctSentence=question.prompts[0].replaceAll(\"%//\",\"\").replaceAll(\"//%\",\"\");let currentIndex=0;function handleAnswerPicked(answer){let indexPlaced=false;setAnswers(current=>[...current].map((el,i)=>{if(indexPlaced)return el;if(el===false){indexPlaced=`${i}`;return answer;}else{return el;}}));if(question.answers[+indexPlaced]!==answer){handleAddMistake({mistake:`word ${answer} placed in gap ${+indexPlaced+1}`});}}function removeAnswer(index){setAnswers(current=>[...current].map((el,i)=>i===index?false:el));}useEffect(()=>{if(answers.length>0){if([...question.answers].sort().toString()===[...answers].sort().toString()){setCorrect(true);}else{setCorrect(false);}}},[answers]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-full justify-between items-center\",children:[/*#__PURE__*/_jsx(ProgressBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 text-lg px-3 py-5 bg-gray-100\",children:[/*#__PURE__*/_jsx(TextToSpeech,{sentence:correctSentence}),/*#__PURE__*/_jsx(\"p\",{className:\"m-0 align-middle text-hightlight\",children:splitSentence.map((chunk,i)=>{if(chunk.startsWith(\"//\")&&chunk.endsWith(\"//\")){let index=currentIndex;// prevent index to be incremented when onClick is called\ncurrentIndex++;return/*#__PURE__*/_jsx(\"button\",{className:\"w-20 border-2 h-16 border-hightlight shadow-md rounded-md align-middle\",onClick:()=>removeAnswer(index),children:answers[index]},i);}else{return/*#__PURE__*/_jsx(\"span\",{className:\"align-middle\",children:chunk},i);}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-3 justify-center\",children:question.data.map((option,i)=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleAnswerPicked(option),className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(TextToSpeech,{sentence:option},i),/*#__PURE__*/_jsx(\"p\",{className:\"text-hightlight font-semibold m-0 px-2 py-3 rounded-md shadow-md h-full\",children:option})]}))})]}),/*#__PURE__*/_jsx(NextButtonRight,{isEnabled:correct,className:\"mt-28\",onClick:handleNextQuestion})]});}export default QuestionCompleteSentence;","map":{"version":3,"names":["useEffect","useState","useExerciseData","TextToSpeech","NextButtonRight","ProgressBar","jsx","_jsx","jsxs","_jsxs","QuestionCompleteSentence","_ref","question","handleNextQuestion","handleAddMistake","answers","setAnswers","Array","from","correct","setCorrect","splitSentence","prompts","split","correctSentence","replaceAll","currentIndex","handleAnswerPicked","answer","indexPlaced","current","map","el","i","mistake","removeAnswer","index","length","sort","toString","className","children","sentence","chunk","startsWith","endsWith","onClick","data","option","isEnabled"],"sources":["/home/samoore/tpd/new/src/components/QuestionCompleteSentence/QuestionCompleteSentence.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useExerciseData } from \"../../Contexts/ExerciseContext\";\r\nimport TextToSpeech from \"../TextToSpeech/TextToSpeech\";\r\nimport NextButtonRight from \"../NextButtonRight/NextButtonRight\";\r\nimport ProgressBar from \"../ProgressBar/ProgressBar\";\r\n\r\nfunction QuestionCompleteSentence({ question }) {\r\n  const { handleNextQuestion, handleAddMistake } = useExerciseData();\r\n\r\n  const [answers, setAnswers] = useState(\r\n    Array.from(question.answers, () => false)\r\n  );\r\n  const [correct, setCorrect] = useState(false);\r\n  const splitSentence = question.prompts[0].split(\"%\");\r\n  const correctSentence = question.prompts[0]\r\n    .replaceAll(\"%//\", \"\")\r\n    .replaceAll(\"//%\", \"\");\r\n\r\n  let currentIndex = 0;\r\n\r\n  function handleAnswerPicked(answer) {\r\n    let indexPlaced = false;\r\n    setAnswers((current) =>\r\n      [...current].map((el, i) => {\r\n        if (indexPlaced) return el;\r\n        if (el === false) {\r\n          indexPlaced = `${i}`;\r\n          return answer;\r\n        } else {\r\n          return el;\r\n        }\r\n      })\r\n    );\r\n    if (question.answers[+indexPlaced] !== answer) {\r\n      handleAddMistake({\r\n        mistake: `word ${answer} placed in gap ${+indexPlaced + 1}`,\r\n      });\r\n    }\r\n  }\r\n\r\n  function removeAnswer(index) {\r\n    setAnswers((current) =>\r\n      [...current].map((el, i) => (i === index ? false : el))\r\n    );\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (answers.length > 0) {\r\n      if (\r\n        [...question.answers].sort().toString() ===\r\n        [...answers].sort().toString()\r\n      ) {\r\n        setCorrect(true);\r\n      } else {\r\n        setCorrect(false);\r\n      }\r\n    }\r\n  }, [answers]);\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full justify-between items-center\">\r\n      <ProgressBar />\r\n      <div className=\"space-y-16\">\r\n        <div className=\"flex items-center gap-3 text-lg px-3 py-5 bg-gray-100\">\r\n          <TextToSpeech sentence={correctSentence} />\r\n          <p className=\"m-0 align-middle text-hightlight\">\r\n            {splitSentence.map((chunk, i) => {\r\n              if (chunk.startsWith(\"//\") && chunk.endsWith(\"//\")) {\r\n                let index = currentIndex; // prevent index to be incremented when onClick is called\r\n                currentIndex++;\r\n                return (\r\n                  <button\r\n                    key={i}\r\n                    className=\"w-20 border-2 h-16 border-hightlight shadow-md rounded-md align-middle\"\r\n                    onClick={() => removeAnswer(index)}\r\n                  >\r\n                    {answers[index]}\r\n                  </button>\r\n                );\r\n              } else {\r\n                return (\r\n                  <span key={i} className=\"align-middle\">\r\n                    {chunk}\r\n                  </span>\r\n                );\r\n              }\r\n            })}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex gap-3 justify-center\">\r\n          {question.data.map((option, i) => (\r\n            <button\r\n              onClick={() => handleAnswerPicked(option)}\r\n              className=\"flex items-center gap-3\"\r\n            >\r\n              <TextToSpeech key={i} sentence={option} />\r\n              <p className=\"text-hightlight font-semibold m-0 px-2 py-3 rounded-md shadow-md h-full\">\r\n                {option}\r\n              </p>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <NextButtonRight\r\n        isEnabled={correct}\r\n        className={\"mt-28\"}\r\n        onClick={handleNextQuestion}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default QuestionCompleteSentence;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
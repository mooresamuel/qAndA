{"ast":null,"code":"/* eslint-disable react/prop-types */import{Spinner}from\"react-bootstrap\";import{useSpeechToText}from\"../../hooks/useSpeechToText\";import SpeakerButton from\"../SpeakerButton/SpeakerButton\";import{Check,Mic,Octagon,RotateCw,Speaker,X}from\"lucide-react\";import{useExerciseData}from\"../../Contexts/ExerciseContext\";import{useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SpeechToTextWord=_ref=>{let{word,label=null}=_ref;const{handleAddMistake,currentQuestion}=useExerciseData();const{startRecording,stopRecording,result,isRecording,isLoading}=useSpeechToText(word);useEffect(function(){if(result&&result[0].word.toLowerCase().replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g,\"\")!==word.toLowerCase()){handleAddMistake({question_id:currentQuestion.question_id,mistake:word});}},[result]);if(result&&result[0].word.toLowerCase().replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g,\"\")===word.toLowerCase()){return/*#__PURE__*/_jsx(SpeakerButton,{children:/*#__PURE__*/_jsx(Check,{})});}else if(result&&result[0].word.toLowerCase().replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g,\"\")!==word.toLowerCase()){return/*#__PURE__*/_jsx(SpeakerButton,{onClick:startRecording,children:/*#__PURE__*/_jsx(RotateCw,{})});}if(!isRecording&&!isLoading&&!result){return/*#__PURE__*/_jsxs(SpeakerButton,{className:\"flex gap-3 items-center p-3 w-fit\",onClick:startRecording,children:[/*#__PURE__*/_jsx(Mic,{}),label&&/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-hightlight m-0 capitalize\",children:label})]});}if(isRecording&&!isLoading&&!result)return/*#__PURE__*/_jsxs(SpeakerButton,{className:\"flex gap-3 items-center p-3 w-fit\",onClick:stopRecording,children:[/*#__PURE__*/_jsx(Octagon,{}),label&&/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-hightlight m-0 capitalize\",children:label})]});if(isLoading){return/*#__PURE__*/_jsx(SpeakerButton,{children:/*#__PURE__*/_jsx(Spinner,{})});}};export default SpeechToTextWord;","map":{"version":3,"names":["Spinner","useSpeechToText","SpeakerButton","Check","Mic","Octagon","RotateCw","Speaker","X","useExerciseData","useEffect","jsx","_jsx","jsxs","_jsxs","SpeechToTextWord","_ref","word","label","handleAddMistake","currentQuestion","startRecording","stopRecording","result","isRecording","isLoading","toLowerCase","replace","question_id","mistake","children","onClick","className"],"sources":["/home/samoore/tpd/new/src/components/SpeechToTextWord/SpeechToTextWord.js"],"sourcesContent":["/* eslint-disable react/prop-types */\r\nimport { Spinner } from \"react-bootstrap\";\r\nimport { useSpeechToText } from \"../../hooks/useSpeechToText\";\r\nimport SpeakerButton from \"../SpeakerButton/SpeakerButton\";\r\nimport { Check, Mic, Octagon, RotateCw, Speaker, X } from \"lucide-react\";\r\nimport { useExerciseData } from \"../../Contexts/ExerciseContext\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst SpeechToTextWord = ({ word, label = null }) => {\r\n  const { handleAddMistake, currentQuestion } = useExerciseData();\r\n  const { startRecording, stopRecording, result, isRecording, isLoading } =\r\n    useSpeechToText(word);\r\n\r\n  useEffect(\r\n    function () {\r\n      if (\r\n        result &&\r\n        result[0].word\r\n          .toLowerCase()\r\n          .replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, \"\") !== word.toLowerCase()\r\n      ) {\r\n        handleAddMistake({\r\n          question_id: currentQuestion.question_id,\r\n          mistake: word,\r\n        });\r\n      }\r\n    },\r\n    [result]\r\n  );\r\n\r\n  if (\r\n    result &&\r\n    result[0].word.toLowerCase().replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, \"\") ===\r\n      word.toLowerCase()\r\n  ) {\r\n    return (\r\n      <SpeakerButton>\r\n        <Check />\r\n      </SpeakerButton>\r\n    );\r\n  } else if (\r\n    result &&\r\n    result[0].word.toLowerCase().replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, \"\") !==\r\n      word.toLowerCase()\r\n  ) {\r\n    return (\r\n      <SpeakerButton onClick={startRecording}>\r\n        <RotateCw />\r\n      </SpeakerButton>\r\n    );\r\n  }\r\n\r\n  if (!isRecording && !isLoading && !result) {\r\n    return (\r\n      <SpeakerButton\r\n        className=\"flex gap-3 items-center p-3 w-fit\"\r\n        onClick={startRecording}\r\n      >\r\n        <Mic />\r\n        {label && (\r\n          <p className=\"font-semibold text-hightlight m-0 capitalize\">\r\n            {label}\r\n          </p>\r\n        )}\r\n      </SpeakerButton>\r\n    );\r\n  }\r\n\r\n  if (isRecording && !isLoading && !result)\r\n    return (\r\n      <SpeakerButton\r\n        className=\"flex gap-3 items-center p-3 w-fit\"\r\n        onClick={stopRecording}\r\n      >\r\n        <Octagon />\r\n        {label && (\r\n          <p className=\"font-semibold text-hightlight m-0 capitalize\">\r\n            {label}\r\n          </p>\r\n        )}\r\n      </SpeakerButton>\r\n    );\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <SpeakerButton>\r\n        <Spinner />\r\n      </SpeakerButton>\r\n    );\r\n  }\r\n};\r\n\r\nexport default SpeechToTextWord;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
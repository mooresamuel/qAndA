{"ast":null,"code":"/* eslint-disable react/prop-types */import{Button,Modal}from\"react-bootstrap\";import{useEffect,useState}from\"react\";import{wordHelperFetch}from\"../../services/wordHelperAPI\";import TextToSpeech from\"../TextToSpeech/TextToSpeech\";import SpokenText from\"../SpokenText/SpokenText\";import FullPageSpinner from\"../FullPageSpinner/FullPageSpinner\";import{useExerciseData}from\"../../Contexts/ExerciseContext\";/* eslint-disable react/prop-types */import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function IndividualWord(_ref){var _spokenAnswer$word,_coachData$similar_so;let{word,spokenAnswer,className=\"\"}=_ref;const[show,setShow]=useState(false);const[isLoading,setIsLoading]=useState(false);const[coachData,setCoachData]=useState({});const{handleAddMistake,currentQuestion}=useExerciseData();const correctlyPronounced=spokenAnswer&&(spokenAnswer===null||spokenAnswer===void 0?void 0:(_spokenAnswer$word=spokenAnswer.word)===null||_spokenAnswer$word===void 0?void 0:_spokenAnswer$word.toLowerCase().replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g,\"\"))===word.replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g,\"\").toLowerCase()&&(spokenAnswer===null||spokenAnswer===void 0?void 0:spokenAnswer.confidence)>0.7;useEffect(function(){if(spokenAnswer&&!correctlyPronounced){handleAddMistake({question_id:currentQuestion.question_id,mistake:word});}},[spokenAnswer]);function handleClose(){setShow(false);}async function handleShow(){if(!correctlyPronounced){try{setIsLoading(true);const helpData=await wordHelperFetch(word);setCoachData(helpData);setShow(true);}finally{setIsLoading(false);}}}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{onClick:handleShow,className:`inline-block pr-1 ${className} ${!spokenAnswer?\"text-black\":correctlyPronounced?\"text-green-600\":\" text-red-500 hover:text-red-500 hover:scale-105 transition-transform duration-200 transform\"}`,children:`${word} `}),isLoading&&/*#__PURE__*/_jsx(FullPageSpinner,{}),/*#__PURE__*/_jsxs(Modal,{centered:true,show:show,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{className:\"capitalize\",children:/*#__PURE__*/_jsx(SpokenText,{size:\"xl\",text:word})})}),/*#__PURE__*/_jsxs(Modal.Body,{className:\"space-y-5 w-full\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(SpokenText,{highlightable:false,text:coachData===null||coachData===void 0?void 0:coachData.description})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(SpokenText,{highlightable:false,text:coachData===null||coachData===void 0?void 0:coachData.example_sentence})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-4\",children:coachData===null||coachData===void 0?void 0:(_coachData$similar_so=coachData.similar_sounds)===null||_coachData$similar_so===void 0?void 0:_coachData$similar_so.split(\",\").map((word,id)=>/*#__PURE__*/_jsx(SpokenText,{text:word},id))})]}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleClose,children:\"Continue\"})})]})]});}export default IndividualWord;","map":{"version":3,"names":["Button","Modal","useEffect","useState","wordHelperFetch","TextToSpeech","SpokenText","FullPageSpinner","useExerciseData","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","IndividualWord","_ref","_spokenAnswer$word","_coachData$similar_so","word","spokenAnswer","className","show","setShow","isLoading","setIsLoading","coachData","setCoachData","handleAddMistake","currentQuestion","correctlyPronounced","toLowerCase","replace","confidence","question_id","mistake","handleClose","handleShow","helpData","children","onClick","centered","onHide","Header","closeButton","Title","size","text","Body","highlightable","description","example_sentence","similar_sounds","split","map","id","Footer","variant"],"sources":["/home/samoore/tpd/new/src/components/IndividualWord/IndividualWord.js"],"sourcesContent":["/* eslint-disable react/prop-types */\r\nimport { Button, Modal } from \"react-bootstrap\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { wordHelperFetch } from \"../../services/wordHelperAPI\";\r\nimport TextToSpeech from \"../TextToSpeech/TextToSpeech\";\r\nimport SpokenText from \"../SpokenText/SpokenText\";\r\nimport FullPageSpinner from \"../FullPageSpinner/FullPageSpinner\";\r\nimport { useExerciseData } from \"../../Contexts/ExerciseContext\";\r\n\r\n/* eslint-disable react/prop-types */\r\nfunction IndividualWord({ word, spokenAnswer, className = \"\" }) {\r\n  const [show, setShow] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [coachData, setCoachData] = useState({});\r\n  const { handleAddMistake, currentQuestion } = useExerciseData();\r\n\r\n  const correctlyPronounced =\r\n    spokenAnswer &&\r\n    spokenAnswer?.word\r\n      ?.toLowerCase()\r\n      .replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, \"\") ===\r\n      word.replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, \"\").toLowerCase() &&\r\n    spokenAnswer?.confidence > 0.7;\r\n\r\n  useEffect(\r\n    function () {\r\n      if (spokenAnswer && !correctlyPronounced) {\r\n        handleAddMistake({\r\n          question_id: currentQuestion.question_id,\r\n          mistake: word,\r\n        });\r\n      }\r\n    },\r\n    [spokenAnswer]\r\n  );\r\n\r\n  function handleClose() {\r\n    setShow(false);\r\n  }\r\n\r\n  async function handleShow() {\r\n    if (!correctlyPronounced) {\r\n      try {\r\n        setIsLoading(true);\r\n        const helpData = await wordHelperFetch(word);\r\n        setCoachData(helpData);\r\n        setShow(true);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <span\r\n        onClick={handleShow}\r\n        className={`inline-block pr-1 ${className} ${\r\n          !spokenAnswer\r\n            ? \"text-black\"\r\n            : correctlyPronounced\r\n            ? \"text-green-600\"\r\n            : \" text-red-500 hover:text-red-500 hover:scale-105 transition-transform duration-200 transform\"\r\n        }`}\r\n      >\r\n        {`${word} `}\r\n      </span>\r\n      {isLoading && <FullPageSpinner />}\r\n      <Modal centered show={show} onHide={handleClose}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title className=\"capitalize\">\r\n            <SpokenText size=\"xl\" text={word} />\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"space-y-5 w-full\">\r\n          <div>\r\n            <SpokenText highlightable={false} text={coachData?.description} />\r\n          </div>\r\n          <div>\r\n            <SpokenText\r\n              highlightable={false}\r\n              text={coachData?.example_sentence}\r\n            />\r\n          </div>\r\n          <div className=\"flex flex-wrap gap-4\">\r\n            {coachData?.similar_sounds?.split(\",\").map((word, id) => (\r\n              <SpokenText key={id} text={word} />\r\n            ))}\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\" onClick={handleClose}>\r\n            Continue\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default IndividualWord;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}